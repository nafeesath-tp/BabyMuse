{% extends "core/base.html" %}
{% load static %}

{% block extra_meta %}
  <meta http-equiv="Cache-Control" content="no-store" />
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10 bg-white p-6 rounded-lg shadow">
    <h2 class="text-2xl font-bold mb-6">📦 My Addresses</h2>

    <a href="{% url 'user:add_address' %}?next={% url 'user:profile' %}" 
       class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mb-4 inline-block">
        ➕ Add New Address
    </a>

    {% if addresses %}
        {% for address in addresses %}
            <div class="border p-4 mb-4 rounded-lg shadow">
                <p><strong>{{ address.name }}</strong> | {{ address.phone }}</p>
                <p>{{ address.address_line }}, {{ address.city }}, {{ address.state }} - {{ address.postal_code }}</p>
                
                {% if address.is_default %}
                    <p class="text-green-600 font-semibold mt-1">🏠 Default Address</p>
                {% endif %}

                <div class="mt-3 space-x-4">
                    <a href="{% url 'user:edit_address' address.id %}?next={% url 'user:profile' %}" 
                       class="text-blue-600 hover:underline">✏️ Edit</a>
                    <a href="{% url 'user:delete_address' address.id %}" 
                       class="text-red-600 hover:underline">🗑️ Delete</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-gray-500">You have no saved addresses.</p>
    {% endif %}
</div>
{% endblock %}
